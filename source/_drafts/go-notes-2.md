---
title: Go 语言学习笔记（二）— 打包和工具链
tags:
  - Go
id: '1126'
categories:
  - [工作相关, Go]
---

## 包

所有 Go 语言的程序都会组织成若干文件，每组文件被称为一个包。包可以作为被别的项目引用的最小单元，每个包可以单独导入和使用。

每个代码文件，以 `.go` 结尾，除了空行和注释，第一行代码应该声明自己所属的包。每个包都在一个单独的目录里，不能把多个包放到同一个目录里，同一个包里的文件也不能放到多个目录里。包名必须和目录名同名。

### main 包

main 是一个特殊的包，会被编译为可执行文件。可执行程序必须包含 main 包。main 包中，必须包含 `main()` 函数。

### 包的导入

使用 `import` 语句可以导入一个包，编译器会按照 GOROOT、GOPAHT、项目目录的顺序检索包。当然，在 Go Modules 环境下，也有专门的检索顺序。

可以导入一个远程的包，填上完整的包版本库地址即可，不要带上 `https`。这个包本地不存在的话，会使用 `go get` 命令从版本库检出并缓存到本地的。

如果出现重名的包，可以通过“命名导入”的方法，来为导入的包指定新的名字，可以有效避免名字冲突。

如果导入了一个没有使用的包，会导致编译失败。

如果需要导入一个包，但是不引用包中的标识符，可以用空白标识符 `_` 来重命名这个包。

### `init` 函数

每个包可以包含多个 `init` 函数，这些函数都会在 `main` 函数之前执行。这个函数主要用于设置包、初始化变量或者其他需要在程序运行前优先完成的引导工作。

使用空白标识符重命名包，会出发 `init` 函数的调用，但是不会引用包中包含的符号，有时候作为一种初始化包的技巧使用。

## 工具链

Go 语言附带的多种强大的工具，使用 `go` 命令来进行调用。

*   go build —— 构建
*   go run —— 构建并执行
*   go clean —— 删除编译生成的可执行文件
*   go vet —— 报告包中的错误
*   go fmt —— 代码格式化
*   go doc —— 查看包的文档